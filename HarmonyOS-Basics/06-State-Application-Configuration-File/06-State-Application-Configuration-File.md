# 06-Stage Application Configuration Files

> **The following knowledge only needs to be browsed briefly. You can look it up separately when you need to use it specifically later!!!**

# Introduction

Each application project's code directory must contain application configuration files. These configuration files provide basic application information to compilation tools, operating systems, and app markets.

In application projects developed based on the Stage model, there exists one app.json5 configuration file and one or more module.json5 configuration files.

The [app.json5 configuration file](https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/app-configuration-file-V5) mainly contains the following content:

- Global configuration information of the application, including basic information such as application Bundle name, developer vendor, version number, etc.
- Configuration information for specific device types.

The [module.json5 configuration file](https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/module-configuration-file-V5) mainly contains the following content:

- Basic configuration information of the Module, including basic information such as Module name, type, description, supported device types, etc.
- [Application component](https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/stage-model-development-overview-V5) information, including description information of UIAbility components and ExtensionAbility components.
- Permission information required during application runtime.

# app.json Configuration File Example

```json
{
  "app": {
    "bundleName": "com.application.myapplication",
    "vendor": "example",
    "versionCode": 1000000,
    "versionName": "1.0.0",
    "icon": "$media:layered-image",
    "label": "$string:app_name",
    "description": "$string:description_application",
    "minAPIVersion": 9,
    "targetAPIVersion": 9,
    "apiReleaseType": "Release",
    "debug": false,
    "car": {
      "minAPIVersion": 8
    },
    "targetBundleName": "com.application.test",
    "targetPriority": 50,
    "appEnvironments": [
      {
        "name": "name1",
        "value": "value1"
      }
    ],
    "maxChildProcess": 5,
    "multiAppMode": {
      "multiAppModeType": "multiInstance",
      "maxCount": 5
    },
    "cloudFileSyncEnabled": false,
    "configuration": "$profile:configuration"
  }
}
```

# app.json Top-Level Properties Detailed Explanation

| Property Name                                                                                                                     | Meaning                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  | Data Type    | Optional                                                                                                                                                                                     |
| :-------------------------------------------------------------------------------------------------------------------------------- | :--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | :----------- | :------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| bundleName                                                                                                                        | Identifies the Bundle name of the application, used to identify the uniqueness of the application. Naming rules are as follows:<br/>- Composed of letters, numbers, underscores and symbol ".", must start with a letter.<br/>- Minimum string length is 7 bytes, maximum length is 128 bytes.<br/>- Recommended to use reverse domain name format (such as "com.example.demo", it is recommended that the first level is domain suffix com, second level is vendor/personal name, third level is application name, can also be multi-level). For applications compiled with system source code, it is recommended to name them in the form of "com.ohos.demo", where ohos identifies system applications.                               | String       | This tag is mandatory.                                                                                                                                                                       |
| bundleType                                                                                                                        | Identifies the Bundle type of the application, used to distinguish applications or AtomicServices. Supported values are as follows:<br/>- app: Current Bundle is an application.<br/>- atomicService: Current Bundle is an AtomicService.<br/>- shared: Current Bundle is a shared library application, reserved field.<br/>- appService: Current Bundle is a system-level shared library application, only for system applications.                                                                                                                                                                                                                                                                                                     | String       | This tag is optional, default value is app.                                                                                                                                                  |
| debug                                                                                                                             | Identifies whether the application is debuggable.<br/>- true: Debuggable, generally used in development stage.<br/>- false: Not debuggable, generally used in release stage.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             | Boolean      | Generated by IDE during compilation and build. This tag is optional, default value is false.                                                                                                 |
| [icon](https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/app-configuration-file-V5#icon标签)                       | Identifies [application icon](https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/application-component-configuration-stage-V5), value is the index of icon resource file.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  | String       | This tag is mandatory.                                                                                                                                                                       |
| label                                                                                                                             | Identifies [application name](https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/application-component-configuration-stage-V5), value is the index of string resource, string length does not exceed 63 bytes.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             | String       | This tag is mandatory.                                                                                                                                                                       |
| description                                                                                                                       | Identifies application description information. Value is a string no longer than 255 bytes, content is the string resource index of description information.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             | String       | This tag is optional, default value is empty.                                                                                                                                                |
| vendor                                                                                                                            | Identifies the description of application development vendor, value is a string no longer than 255 bytes.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                | String       | This tag is optional, default value is empty.                                                                                                                                                |
| versionCode                                                                                                                       | Identifies the version number of the application, value is a positive integer less than 2^31. This number is only used to determine whether a version is newer than another version, larger values indicate higher versions. Developers can set this value to any positive integer, but must ensure that new versions of the application use larger values than older versions.                                                                                                                                                                                                                                                                                                                                                          | Number       | This tag is mandatory.                                                                                                                                                                       |
| versionName                                                                                                                       | Identifies the application version number displayed to users. Value is a string no longer than 127 bytes, composed only of numbers and dots, recommended to use "A.B.C.D" four-segment format. The recommended meanings of the four segments are as follows:<br/>First segment: Major version, range 0~99, major revision version, such as implementing new major features or major changes.<br/>Second segment: Minor version, range 0~99, indicates implementation of prominent features, such as new feature additions or major bug fixes.<br/>Third segment: Feature version, range 0~99, identifies planned new version features.<br/>Fourth segment: Patch version, range 0~999, indicates maintenance version, such as bug fixes. | String       | This tag is mandatory.                                                                                                                                                                       |
| minCompatibleVersionCode                                                                                                          | Identifies the lowest historical version number that the application can be compatible with, used for application cross-device compatibility judgment. Value range is 0~2147483647.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      | Number       | This tag is optional, default value equals versionCode tag value.                                                                                                                            |
| minAPIVersion                                                                                                                     | Identifies the minimum API version of SDK required for application operation. Value range is 0~2147483647.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               | Number       | Automatically generated from compatibleSdkVersion in build-profile.json5 during application compilation and build.                                                                           |
| targetAPIVersion                                                                                                                  | Identifies the target API version required for application operation. Value range is 0~2147483647.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       | Number       | Automatically generated from compileSdkVersion in build-profile.json5 during application compilation and build.                                                                              |
| apiReleaseType                                                                                                                    | Identifies the type of API target version required for application operation, expressed as string type. Values are "CanaryN", "BetaN" or "Release", where N represents an integer greater than zero.<br/>- Canary: Limited release version.<br/>- Beta: Publicly released Beta version.<br/>- Release: Publicly released official version.                                                                                                                                                                                                                                                                                                                                                                                               | String       | Automatically generated based on the Stage of currently used SDK during application compilation and build. Even if manually configured, it will be overwritten during compilation and build. |
| accessible                                                                                                                        | Identifies whether the application can access the application's installation directory, only effective for Stage model system applications and preinstalled applications.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                | Boolean      | This tag is optional, default value is false.                                                                                                                                                |
| multiProjects                                                                                                                     | Identifies whether the current project supports joint development of multiple projects.<br/>- true: Current project supports joint development of multiple projects. Multi-project development can refer to [Multi-Project Build](https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/ide-hvigor-multi-projects-V5).<br/>- false: Current project does not support joint development of multiple projects.                                                                                                                                                                                                                                                                                                                  | Boolean      | This tag is optional, default value is false.                                                                                                                                                |
| asanEnabled                                                                                                                       | Identifies whether the application enables asan detection, used to assist in locating crash issues caused by buffer overflow.<br/>- true: Current project enables asan detection.<br/>- false: Current project does not enable asan detection.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | Boolean      | This tag is optional, default value is false.                                                                                                                                                |
| tablet                                                                                                                            | Identifies special configuration for tablet devices, configurable property fields include the aforementioned: minAPIVersion. If this property is used for special configuration of tablet devices, the application will use the property values configured here on tablet devices and ignore property values configured in the app.json5 common area.                                                                                                                                                                                                                                                                                                                                                                                    | Object       | This tag is optional, tablet devices use property values configured in app.json5 common area when omitted.                                                                                   |
| tv                                                                                                                                | Identifies special configuration for tv devices, configurable property fields include the aforementioned: minAPIVersion. If this property is used for special configuration of tv devices, the application will use the property values configured here on tv devices and ignore property values configured in the app.json5 common area.                                                                                                                                                                                                                                                                                                                                                                                                | Object       | This tag is optional, tv devices use property values configured in app.json5 common area when omitted.                                                                                       |
| wearable                                                                                                                          | Identifies special configuration for wearable devices, configurable property fields include the aforementioned: minAPIVersion. If this property is used for special configuration of wearable devices, the application will use the property values configured here on wearable devices and ignore property values configured in the app.json5 common area.                                                                                                                                                                                                                                                                                                                                                                              | Object       | This tag is optional, wearable devices use property values configured in app.json5 common area when omitted.                                                                                 |
| car                                                                                                                               | Identifies special configuration for car devices, configurable property fields include the aforementioned: minAPIVersion. If this property is used for special configuration of car devices, the application will use the property values configured here on car devices and ignore property values configured in the app.json5 common area.                                                                                                                                                                                                                                                                                                                                                                                             | Object       | This tag is optional, car devices use property values configured in app.json5 common area when omitted.                                                                                      |
| default                                                                                                                           | Identifies special configuration for default devices, configurable property fields include the aforementioned: minAPIVersion. If this property is used for special configuration of default devices, the application will use the property values configured here on default devices and ignore property values configured in the app.json5 common area.                                                                                                                                                                                                                                                                                                                                                                                 | Object       | This tag is optional, default devices use property values configured in app.json5 common area when omitted.                                                                                  |
| targetBundleName                                                                                                                  | Identifies the target application specified by the current package, tag value rules and range are consistent with bundleName tag. Applications configured with this field are applications with overlay characteristics.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 | String       | This tag is optional, default value is empty.                                                                                                                                                |
| targetPriority                                                                                                                    | Identifies the priority of the current application, value range is 1~100. This field can only be configured after configuring the targetBundleName field.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                | Number       | This tag is optional, default value is 1.                                                                                                                                                    |
| generateBuildHash                                                                                                                 | Identifies whether all HAPs and HSPs of the current application are generated with hash values by packaging tools. When this field is configured as true, all HAPs and HSPs under this application will have corresponding hash values generated by packaging tools. During system OTA upgrade, if the application's versionCode remains unchanged, hash values can be used to determine whether the application needs to be upgraded.<br/>**Note:** This field only takes effect for preinstalled applications.                                                                                                                                                                                                                         | Boolean      | This tag is optional, default value is false.                                                                                                                                                |
| GWPAsanEnabled                                                                                                                    | Identifies whether the application enables GWP-asan heap memory detection tool, used to analyze memory corruption issues such as memory out-of-bounds and use-after-free.<br/>- true: Current project enables GWP-asan detection.<br/>- false: Current project does not enable GWP-asan detection.                                                                                                                                                                                                                                                                                                                                                                                                                                       | Boolean      | This tag is optional, default value is false.                                                                                                                                                |
| [appEnvironments](https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/app-configuration-file-V5#appenvironments标签) | Identifies application environment variables configured by the current module.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | Object Array | This tag is optional, default value is empty.                                                                                                                                                |
| maxChildProcess                                                                                                                   | Identifies the maximum number of child processes that the current application itself can create, value range is 0 to 512, 0 means no limit. When the application has multiple modules, the configuration of the entry module prevails.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   | Number       | This tag is optional, uses system-configured default value when omitted.                                                                                                                     |
| [multiAppMode](https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/app-configuration-file-V5#multiappmode标签)       | Identifies the multi-instance mode configured by the current application. Only effective for entry or feature module configuration of applications with bundleType as app. When multiple modules exist, the configuration of the entry module prevails.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  | Object       | This tag is optional, default value is empty.                                                                                                                                                |
| cloudFileSyncEnabled                                                                                                              | Identifies whether the current application enables cloud file synchronization capability.<br/>- true: Current application enables cloud file synchronization capability.<br/>- false: Current application does not enable cloud file synchronization capability.                                                                                                                                                                                                                                                                                                                                                                                                                                                                         | Boolean      | This tag is optional, default value is false.                                                                                                                                                |
| [configuration](https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/app-configuration-file-V5#configuration标签)     | Identifies the capability of current application font size following system configuration. This tag is a profile file resource, used to specify configuration files describing application font size following system changes.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | String       | This tag is optional, configuration uses system default settings when omitted.                                                                                                               |

# icon

This tag identifies [application icon](https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/application-component-configuration-stage-V5) and the index to layered icon configuration file.

Supports layered icon configuration, specific method as follows:

1. Place icon foreground resources and background resources in AppScope/resources/base/media directory.
2. Create a json file in the above media directory (e.g., layered-image.json), reference foreground and background resources in the file, see [Icon Resource Specification](https://developer.huawei.com/consumer/cn/doc/design-guides/application-icon-0000001953444009#section634668113212).

Layered icon resource file example:

```json
{
  "layered-image": {
    "background": "$media:background", //Background resource
    "foreground": "$media:foreground" //Foreground resource
  }
}
```

icon tag example:

```json
{
  "app": {
    "icon": "$media:layered-image"
  }
}
```

# appEnvironments

This tag identifies environment variables configured by the application. Applications sometimes depend on third-party libraries at runtime, which use custom environment variables. To avoid modifying the implementation logic of third-party libraries, custom environment variables can be set in the project configuration file for runtime use.

**Table 2** appEnvironments Tag Description

| Property Name | Meaning                                                                                            | Data Type | Optional                                      |
| :------------ | :------------------------------------------------------------------------------------------------- | :-------- | :-------------------------------------------- |
| name          | Identifies the variable name of environment variable. Value is a string no longer than 4096 bytes. | String    | This tag is optional, default value is empty. |
| value         | Identifies the value of environment variable. Value is a string no longer than 4096 bytes.         | String    | This tag is optional, default value is empty. |

appEnvironments tag example:

```json
{
  "app": {
    "appEnvironments": [
      {
        "name": "name1",
        "value": "value1"
      }
    ]
  }
}
```

# multiAppMode

Application multi-instance mode.

**Table 3** multiAppMode Tag Description

| Property Name    | Meaning                                                                                                                                                                                            | Data Type | Optional               |
| :--------------- | :------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | :-------- | :--------------------- |
| multiAppModeType | Identifies application multi-instance mode type, supported values are as follows:<br/>- multiInstance: Multi-instance mode. This field only supports 2in1 devices.<br/>- appClone: App clone mode. | String    | This tag is mandatory. |
| maxCount         | Identifies the maximum allowed number of application multi-instances, supported values are as follows:<br/>- multiInstance mode: Value range 1~10.<br/>- appClone mode: Value range 1~5.           | Number    | This tag is mandatory. |

multiAppMode tag example:

```json
{
  "app": {
    "multiAppMode": {
      "multiAppModeType": "appClone",
      "maxCount": 5
    }
  }
}
```

# configuration

This tag is a profile file resource, used to specify configuration files describing application font size following system changes.

configuration tag example:

```json
{
  "app": {
    "configuration": "$profile:configuration"
  }
}
```

Define configuration file configuration.json under resources/base/profile in development view, where the filename "configuration" can be customized and needs to correspond with the information specified by the configuration tag. The configuration file lists the properties of current application font size following system changes.

**Table 4** configuration Tag Description

| Property Name    | Meaning                                                                                                                                                                                                       | Data Type | Optional                                             |
| :--------------- | :------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ | :-------- | :--------------------------------------------------- |
| fontSizeScale    | Whether application font size follows system, supported values are as follows:<br/>- followSystem: Follow system.<br/>- nonFollowSystem: Do not follow system.                                                | String    | This tag is optional, default value is followSystem. |
| fontSizeMaxScale | After application font size chooses to follow system, the configured maximum ratio, supported values: 1, 1.15, 1.3, 1.45, 1.75, 2, 3.2. This item does not take effect when fontSizeScale is nonFollowSystem. | String    | This tag is optional, default value is 3.2.          |

resources/base/profile/configuration.json

```json
{
  "configuration": {
    "fontSizeScale": "followSystem",
    "fontSizeMaxScale": "3.2"
  }
}
```
